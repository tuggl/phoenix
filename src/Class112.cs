using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.Text;
namespace ns0
{
	internal sealed class Class112
	{
		public List<Class111> list_0;
		public List<string> list_1;
		public List<string> list_2;
		public Class112()
		{
			this.list_0 = new List<Class111>();
			this.list_1 = new List<string>();
			this.list_2 = new List<string>();
		}
		public GClass5 method_0()
		{
			GClass5 gClass = new GClass5(531u);
			gClass.method_9(-1);
			gClass.method_9(this.list_1.Count);
			using (GStruct0.smethod_0(this.list_1))
			{
				foreach (string current in this.list_1)
				{
					gClass.method_7(current);
				}
			}
			gClass.method_11(6u);
			gClass.method_7(Class8.smethod_1("mod_tool_category1"));
			gClass.method_11(8u);
			gClass.method_7(Class8.smethod_1("mod_tool_category1_problem1"));
			gClass.method_7(Class8.smethod_1("mod_tool_category1_solution1"));
			gClass.method_7(Class8.smethod_1("mod_tool_category1_problem2"));
			gClass.method_7(Class8.smethod_1("mod_tool_category1_solution2"));
			gClass.method_7(Class8.smethod_1("mod_tool_category1_problem3"));
			gClass.method_7(Class8.smethod_1("mod_tool_category1_solution3"));
			gClass.method_7(Class8.smethod_1("mod_tool_category1_problem4"));
			gClass.method_7(Class8.smethod_1("mod_tool_category1_solution4"));
			gClass.method_7(Class8.smethod_1("mod_tool_category1_problem5"));
			gClass.method_7(Class8.smethod_1("mod_tool_category1_solution5"));
			gClass.method_7(Class8.smethod_1("mod_tool_category1_problem6"));
			gClass.method_7(Class8.smethod_1("mod_tool_category1_solution6"));
			gClass.method_7(Class8.smethod_1("mod_tool_category1_problem7"));
			gClass.method_7(Class8.smethod_1("mod_tool_category1_solution7"));
			gClass.method_7(Class8.smethod_1("mod_tool_category1_problem8"));
			gClass.method_7(Class8.smethod_1("mod_tool_category1_solution8"));
			gClass.method_7(Class8.smethod_1("mod_tool_category2"));
			gClass.method_11(8u);
			gClass.method_7(Class8.smethod_1("mod_tool_category2_problem1"));
			gClass.method_7(Class8.smethod_1("mod_tool_category2_solution1"));
			gClass.method_7(Class8.smethod_1("mod_tool_category2_problem2"));
			gClass.method_7(Class8.smethod_1("mod_tool_category2_solution2"));
			gClass.method_7(Class8.smethod_1("mod_tool_category2_problem3"));
			gClass.method_7(Class8.smethod_1("mod_tool_category2_solution3"));
			gClass.method_7(Class8.smethod_1("mod_tool_category2_problem4"));
			gClass.method_7(Class8.smethod_1("mod_tool_category2_solution4"));
			gClass.method_7(Class8.smethod_1("mod_tool_category2_problem5"));
			gClass.method_7(Class8.smethod_1("mod_tool_category2_solution5"));
			gClass.method_7(Class8.smethod_1("mod_tool_category2_problem6"));
			gClass.method_7(Class8.smethod_1("mod_tool_category2_solution6"));
			gClass.method_7(Class8.smethod_1("mod_tool_category2_problem7"));
			gClass.method_7(Class8.smethod_1("mod_tool_category2_solution7"));
			gClass.method_7(Class8.smethod_1("mod_tool_category2_problem8"));
			gClass.method_7(Class8.smethod_1("mod_tool_category2_solution8"));
			gClass.method_7(Class8.smethod_1("mod_tool_category3"));
			gClass.method_11(8u);
			gClass.method_7(Class8.smethod_1("mod_tool_category3_problem1"));
			gClass.method_7(Class8.smethod_1("mod_tool_category3_solution1"));
			gClass.method_7(Class8.smethod_1("mod_tool_category3_problem2"));
			gClass.method_7(Class8.smethod_1("mod_tool_category3_solution2"));
			gClass.method_7(Class8.smethod_1("mod_tool_category3_problem3"));
			gClass.method_7(Class8.smethod_1("mod_tool_category3_solution3"));
			gClass.method_7(Class8.smethod_1("mod_tool_category3_problem4"));
			gClass.method_7(Class8.smethod_1("mod_tool_category3_solution4"));
			gClass.method_7(Class8.smethod_1("mod_tool_category3_problem5"));
			gClass.method_7(Class8.smethod_1("mod_tool_category3_solution5"));
			gClass.method_7(Class8.smethod_1("mod_tool_category3_problem6"));
			gClass.method_7(Class8.smethod_1("mod_tool_category3_solution6"));
			gClass.method_7(Class8.smethod_1("mod_tool_category3_problem7"));
			gClass.method_7(Class8.smethod_1("mod_tool_category3_solution7"));
			gClass.method_7(Class8.smethod_1("mod_tool_category3_problem8"));
			gClass.method_7(Class8.smethod_1("mod_tool_category3_solution8"));
			gClass.method_7(Class8.smethod_1("mod_tool_category4"));
			gClass.method_11(8u);
			gClass.method_7(Class8.smethod_1("mod_tool_category4_problem1"));
			gClass.method_7(Class8.smethod_1("mod_tool_category4_solution1"));
			gClass.method_7(Class8.smethod_1("mod_tool_category4_problem2"));
			gClass.method_7(Class8.smethod_1("mod_tool_category4_solution2"));
			gClass.method_7(Class8.smethod_1("mod_tool_category4_problem3"));
			gClass.method_7(Class8.smethod_1("mod_tool_category4_solution3"));
			gClass.method_7(Class8.smethod_1("mod_tool_category4_problem4"));
			gClass.method_7(Class8.smethod_1("mod_tool_category4_solution4"));
			gClass.method_7(Class8.smethod_1("mod_tool_category4_problem5"));
			gClass.method_7(Class8.smethod_1("mod_tool_category4_solution5"));
			gClass.method_7(Class8.smethod_1("mod_tool_category4_problem6"));
			gClass.method_7(Class8.smethod_1("mod_tool_category4_solution6"));
			gClass.method_7(Class8.smethod_1("mod_tool_category4_problem7"));
			gClass.method_7(Class8.smethod_1("mod_tool_category4_solution7"));
			gClass.method_7(Class8.smethod_1("mod_tool_category4_problem8"));
			gClass.method_7(Class8.smethod_1("mod_tool_category4_solution8"));
			gClass.method_7(Class8.smethod_1("mod_tool_category5"));
			gClass.method_11(8u);
			gClass.method_7(Class8.smethod_1("mod_tool_category5_problem1"));
			gClass.method_7(Class8.smethod_1("mod_tool_category5_solution1"));
			gClass.method_7(Class8.smethod_1("mod_tool_category5_problem2"));
			gClass.method_7(Class8.smethod_1("mod_tool_category5_solution2"));
			gClass.method_7(Class8.smethod_1("mod_tool_category5_problem3"));
			gClass.method_7(Class8.smethod_1("mod_tool_category5_solution3"));
			gClass.method_7(Class8.smethod_1("mod_tool_category5_problem4"));
			gClass.method_7(Class8.smethod_1("mod_tool_category5_solution4"));
			gClass.method_7(Class8.smethod_1("mod_tool_category5_problem5"));
			gClass.method_7(Class8.smethod_1("mod_tool_category5_solution5"));
			gClass.method_7(Class8.smethod_1("mod_tool_category5_problem6"));
			gClass.method_7(Class8.smethod_1("mod_tool_category5_solution6"));
			gClass.method_7(Class8.smethod_1("mod_tool_category5_problem7"));
			gClass.method_7(Class8.smethod_1("mod_tool_category5_solution7"));
			gClass.method_7(Class8.smethod_1("mod_tool_category5_problem8"));
			gClass.method_7(Class8.smethod_1("mod_tool_category5_solution8"));
			gClass.method_7(Class8.smethod_1("mod_tool_category6"));
			gClass.method_11(8u);
			gClass.method_7(Class8.smethod_1("mod_tool_category6_problem1"));
			gClass.method_7(Class8.smethod_1("mod_tool_category6_solution1"));
			gClass.method_7(Class8.smethod_1("mod_tool_category6_problem2"));
			gClass.method_7(Class8.smethod_1("mod_tool_category6_solution2"));
			gClass.method_7(Class8.smethod_1("mod_tool_category6_problem3"));
			gClass.method_7(Class8.smethod_1("mod_tool_category6_solution3"));
			gClass.method_7(Class8.smethod_1("mod_tool_category6_problem4"));
			gClass.method_7(Class8.smethod_1("mod_tool_category6_solution4"));
			gClass.method_7(Class8.smethod_1("mod_tool_category6_problem5"));
			gClass.method_7(Class8.smethod_1("mod_tool_category6_solution5"));
			gClass.method_7(Class8.smethod_1("mod_tool_category6_problem6"));
			gClass.method_7(Class8.smethod_1("mod_tool_category6_solution6"));
			gClass.method_7(Class8.smethod_1("mod_tool_category6_problem7"));
			gClass.method_7(Class8.smethod_1("mod_tool_category6_solution7"));
			gClass.method_7(Class8.smethod_1("mod_tool_category6_problem8"));
			gClass.method_7(Class8.smethod_1("mod_tool_category6_solution8"));
			gClass.method_7("");
			gClass.method_7("");
			gClass.method_7("");
			gClass.method_7("");
			gClass.method_7("");
			gClass.method_7("");
			gClass.method_7("");
			gClass.method_9(this.list_2.Count);
			using (GStruct0.smethod_0(this.list_2))
			{
				foreach (string current in this.list_2)
				{
					gClass.method_7(current);
				}
			}
			gClass.method_7("");
			return gClass;
		}
		public void method_1(Class6 class6_0)
		{
			GClass4.smethod_0("Loading Pre-set Help Messages..");
			this.list_1.Clear();
			this.list_2.Clear();
			DataTable dataTable = class6_0.method_3("SELECT type,message FROM moderation_presets WHERE enabled = '1'");
			if (dataTable != null)
			{
				foreach (DataRow dataRow in dataTable.Rows)
				{
					string item = (string)dataRow["message"];
					string text = dataRow["type"].ToString().ToLower();
					if (text != null)
					{
						if (!(text == "message"))
						{
							if (text == "roommessage")
							{
								this.list_2.Add(item);
							}
						}
						else
						{
							this.list_1.Add(item);
						}
					}
				}
				GClass4.smethod_1("completed!");
			}
		}
		public void method_2(Class6 class6_0)
		{
			GClass4.smethod_0("Loading Current Help Tickets..");
			DataTable dataTable = class6_0.method_3("SELECT id,score,type,status,sender_id,reported_id,moderator_id,message,room_id,room_name,timestamp FROM moderation_tickets WHERE status = 'open' OR status = 'picked'");
			if (dataTable != null)
			{
				foreach (DataRow dataRow in dataTable.Rows)
				{
					Class111 @class = new Class111((uint)dataRow["id"], (int)dataRow["score"], (int)dataRow["type"], (uint)dataRow["sender_id"], (uint)dataRow["reported_id"], (string)dataRow["message"], (uint)dataRow["room_id"], (string)dataRow["room_name"], (double)dataRow["timestamp"], (uint)dataRow["moderator_id"]);
					if (dataRow["status"].ToString().ToLower() == "picked")
					{
						@class.method_0((uint)dataRow["moderator_id"], false);
					}
					this.list_0.Add(@class);
				}
				GClass4.smethod_1("completed!");
			}
		}
		public void method_3(Class16 class16_0, int int_0, uint uint_0, string string_0)
		{
			if (class16_0.method_2().uint_3 > 0u)
			{
				Class27 @class = Phoenix.smethod_15().method_9().method_11(class16_0.method_2().uint_3);
				uint uint_ = 0u;
				using (Class6 class2 = Phoenix.smethod_12().method_0())
				{
					class2.method_0("message", string_0);
					class2.method_0("name", @class.string_0);
					class2.method_1(string.Concat(new object[]
					{
						"INSERT INTO moderation_tickets (score,type,status,sender_id,reported_id,moderator_id,message,room_id,room_name,timestamp) VALUES (1,'",
						int_0,
						"','open','",
						class16_0.method_2().uint_0,
						"','",
						uint_0,
						"','0',@message,'",
						@class.uint_0,
						"',@name,UNIX_TIMESTAMP())"
					}));
					class2.method_1("UPDATE user_info SET cfhs = cfhs + 1 WHERE user_id = '" + class16_0.method_2().uint_0 + "' LIMIT 1");
					uint_ = (uint)class2.method_4("SELECT id FROM moderation_tickets WHERE sender_id = '" + class16_0.method_2().uint_0 + "' ORDER BY id DESC LIMIT 1")[0];
				}
				Class111 class3 = new Class111(uint_, 1, int_0, class16_0.method_2().uint_0, uint_0, string_0, @class.uint_0, @class.string_0, Phoenix.smethod_6(), 0u);
				this.list_0.Add(class3);
				this.method_11(class3);
			}
		}
		public void method_4(Class16 class16_0)
		{
			using (GStruct0.smethod_0(this.list_0))
			{
				foreach (Class111 current in this.list_0)
				{
					if (current.enum6_0 == Enum6.const_0 || current.enum6_0 == Enum6.const_1)
					{
						class16_0.method_14(current.method_4());
					}
				}
			}
		}
		public Class111 method_5(uint uint_0)
		{
			Class111 result;
			using (GStruct0.smethod_0(this.list_0))
			{
				foreach (Class111 current in this.list_0)
				{
					if (current.UInt32_0 == uint_0)
					{
						result = current;
						return result;
					}
				}
			}
			result = null;
			return result;
		}
		public void method_6(Class16 class16_0, uint uint_0)
		{
			Class111 @class = this.method_5(uint_0);
			if (@class != null && @class.enum6_0 == Enum6.const_0)
			{
				@class.method_0(class16_0.method_2().uint_0, true);
				this.method_11(@class);
			}
		}
		public void method_7(Class16 class16_0, uint uint_0)
		{
			Class111 @class = this.method_5(uint_0);
			if (@class != null && @class.enum6_0 == Enum6.const_1 && @class.uint_3 == class16_0.method_2().uint_0)
			{
				@class.method_2(true);
				this.method_11(@class);
			}
		}
		public void method_8(Class16 class16_0, uint uint_0, int int_0)
		{
			Class111 @class = this.method_5(uint_0);
			if (@class != null && @class.enum6_0 == Enum6.const_1 && @class.uint_3 == class16_0.method_2().uint_0)
			{
				Class16 class2 = Phoenix.smethod_15().method_2().method_2(@class.uint_1);
				int int_;
				Enum6 enum6_;
				switch (int_0)
				{
				case 1:
					int_ = 1;
					enum6_ = Enum6.const_4;
					goto IL_AC;
				case 2:
					int_ = 2;
					enum6_ = Enum6.const_3;
					using (Class6 class3 = Phoenix.smethod_12().method_0())
					{
						class3.method_1("UPDATE user_info SET cfhs_abusive = cfhs_abusive + 1 WHERE user_id = '" + @class.uint_1 + "' LIMIT 1");
						goto IL_AC;
					}
					break;
				}
				int_ = 0;
				enum6_ = Enum6.const_2;
				IL_AC:
				if (class2 != null)
				{
					GClass5 gClass = new GClass5(540u);
					gClass.method_9(int_);
					class2.method_14(gClass);
				}
				@class.method_1(enum6_, true);
				this.method_11(@class);
			}
		}
		public bool method_9(uint uint_0)
		{
			bool result;
			using (GStruct0.smethod_0(this.list_0))
			{
				foreach (Class111 current in this.list_0)
				{
					if (current.uint_1 == uint_0 && current.enum6_0 == Enum6.const_0)
					{
						result = true;
						return result;
					}
				}
			}
			result = false;
			return result;
		}
		public void method_10(uint uint_0)
		{
			using (GStruct0.smethod_0(this.list_0))
			{
				foreach (Class111 current in this.list_0)
				{
					if (current.uint_1 == uint_0)
					{
						current.method_3(true);
						this.method_11(current);
						break;
					}
				}
			}
		}
		public void method_11(Class111 class111_0)
		{
			Phoenix.smethod_15().method_2().method_22(class111_0.method_4(), "acc_supporttool");
		}
		public void method_12(Class16 class16_0, uint uint_0, bool bool_0, bool bool_1, bool bool_2)
		{
			Class14 @class = Phoenix.smethod_15().method_9().method_19(uint_0);
			if (@class != null)
			{
				if (bool_1)
				{
					@class.int_1 = 1;
					using (Class6 class2 = Phoenix.smethod_12().method_0())
					{
						class2.method_1("UPDATE rooms SET state = 'locked' WHERE id = '" + @class.UInt32_0 + "' LIMIT 1");
					}
				}
				if (bool_2)
				{
					@class.string_0 = Class8.smethod_1("mod_inappropriate_roomname");
					@class.string_1 = Class8.smethod_1("mod_inappropriate_roomdesc");
					@class.list_0.Clear();
					using (Class6 class2 = Phoenix.smethod_12().method_0())
					{
						class2.method_1(string.Concat(new object[]
						{
							"UPDATE rooms SET caption = '",
							@class.string_0,
							"', description = '",
							@class.string_1,
							"', tags = '' WHERE id = '",
							@class.UInt32_0,
							"' LIMIT 1"
						}));
					}
				}
				if (bool_0)
				{
					List<Class33> list = new List<Class33>();
					for (int i = 0; i < @class.class33_0.Length; i++)
					{
						Class33 class3 = @class.class33_0[i];
						if (class3 != null && (class3 != null && !class3.Boolean_4 && class3.method_16().method_2().uint_1 < class16_0.method_2().uint_1))
						{
							list.Add(class3);
						}
					}
					for (int i = 0; i < list.Count; i++)
					{
						@class.method_47(list[i].method_16(), true, false);
					}
				}
			}
		}
		public void method_13(uint uint_0, bool bool_0, string string_0)
		{
			Class14 @class = Phoenix.smethod_15().method_9().method_19(uint_0);
			if (@class != null && string_0.Length > 1)
			{
				StringBuilder stringBuilder = new StringBuilder();
				int num = 0;
				for (int i = 0; i < @class.class33_0.Length; i++)
				{
					Class33 class2 = @class.class33_0[i];
					if (class2 != null && !class2.Boolean_4)
					{
						class2.method_16().method_9(string_0, 0);
						if (class2.method_16().method_2().uint_1 <= 2u)
						{
							if (num > 0)
							{
								stringBuilder.Append(" OR ");
							}
							stringBuilder.Append("user_id = '" + class2.method_16().method_2().uint_0 + "'");
							num++;
						}
					}
				}
				if (bool_0 && num > 0)
				{
					using (Class6 class3 = Phoenix.smethod_12().method_0())
					{
						class3.method_1(string.Concat(new object[]
						{
							"UPDATE user_info SET cautions = cautions + 1 WHERE ",
							stringBuilder.ToString(),
							" LIMIT ",
							num
						}));
					}
				}
			}
		}
		public GClass5 method_14(Class27 class27_0)
		{
			Class14 @class = Phoenix.smethod_15().method_9().method_19(class27_0.uint_0);
			uint uint_ = 0u;
			using (Class6 class2 = Phoenix.smethod_12().method_0())
			{
				try
				{
					class2.method_0("owner", class27_0.string_3);
					uint_ = (uint)class2.method_4("SELECT id FROM users WHERE username = @owner LIMIT 1")[0];
				}
				catch (Exception)
				{
				}
			}
			GClass5 gClass = new GClass5(538u);
			gClass.method_11(class27_0.uint_0);
			gClass.method_9(class27_0.int_2);
			if (@class != null)
			{
				gClass.method_13(@class.method_56(class27_0.string_3) != null);
			}
			else
			{
				gClass.method_13(false);
			}
			gClass.method_11(uint_);
			gClass.method_7(class27_0.string_3);
			gClass.method_11(class27_0.uint_0);
			gClass.method_7(class27_0.string_0);
			gClass.method_7(class27_0.string_1);
			gClass.method_9(class27_0.Int32_0);
			foreach (string current in class27_0.list_0)
			{
				gClass.method_7(current);
			}
			if (@class != null)
			{
				gClass.method_13(@class.Boolean_0);
				if (@class.class21_0 == null)
				{
					return gClass;
				}
				gClass.method_7(@class.class21_0.string_0);
				gClass.method_7(@class.class21_0.string_1);
				gClass.method_9(@class.class21_0.list_0.Count);
				using (GStruct0.smethod_0(@class.class21_0.list_0))
				{
					foreach (string current in @class.class21_0.list_0)
					{
						gClass.method_7(current);
					}
					return gClass;
				}
			}
			gClass.method_13(false);
			return gClass;
		}
		public void method_15(Class16 class16_0, uint uint_0, string string_0, bool bool_0)
		{
			Class16 @class = Phoenix.smethod_15().method_2().method_2(uint_0);
			if (@class != null && @class.method_2().uint_3 >= 1u && @class.method_2().uint_0 != class16_0.method_2().uint_0)
			{
				if (@class.method_2().uint_1 >= class16_0.method_2().uint_1)
				{
					class16_0.method_8(Class8.smethod_1("mod_error_permission_kick"));
				}
				else
				{
					Class14 class2 = Phoenix.smethod_15().method_9().method_19(@class.method_2().uint_3);
					if (class2 != null)
					{
						class2.method_47(@class, true, false);
						if (!bool_0)
						{
							@class.method_8(string_0);
							using (Class6 class3 = Phoenix.smethod_12().method_0())
							{
								class3.method_1("UPDATE user_info SET cautions = cautions + 1 WHERE user_id = '" + uint_0 + "' LIMIT 1");
							}
						}
					}
				}
			}
		}
		public void method_16(Class16 class16_0, uint uint_0, string string_0, bool bool_0)
		{
			Class16 @class = Phoenix.smethod_15().method_2().method_2(uint_0);
			if (@class != null && @class.method_2().uint_0 != class16_0.method_2().uint_0)
			{
				if (bool_0 && @class.method_2().uint_1 >= class16_0.method_2().uint_1)
				{
					class16_0.method_8(Class8.smethod_1("mod_error_permission_caution"));
					bool_0 = false;
				}
				@class.method_9(string_0, 0);
				if (bool_0)
				{
					using (Class6 class2 = Phoenix.smethod_12().method_0())
					{
						class2.method_1("UPDATE user_info SET cautions = cautions + 1 WHERE user_id = '" + uint_0 + "' LIMIT 1");
					}
				}
			}
		}
		public void method_17(Class16 class16_0, uint uint_0, int int_0, string string_0)
		{
			Class16 @class = Phoenix.smethod_15().method_2().method_2(uint_0);
			if (@class != null && @class.method_2().uint_0 != class16_0.method_2().uint_0)
			{
				if (@class.method_2().uint_1 >= class16_0.method_2().uint_1)
				{
					class16_0.method_8(Class8.smethod_1("mod_error_permission_ban"));
				}
				else
				{
					double double_ = (double)int_0;
					Phoenix.smethod_15().method_3().method_2(@class, class16_0.method_2().string_0, double_, string_0, false);
				}
			}
		}
		public GClass5 method_18(uint uint_0)
		{
			GClass5 result;
			using (Class6 @class = Phoenix.smethod_12().method_0())
			{
				DataRow dataRow = @class.method_4("SELECT id, username, online FROM users WHERE id = '" + uint_0 + "' LIMIT 1");
				DataRow dataRow2 = @class.method_4("SELECT reg_timestamp, login_timestamp, cfhs, cfhs_abusive, cautions, bans FROM user_info WHERE user_id = '" + uint_0 + "' LIMIT 1");
				if (dataRow == null)
				{
					throw new ArgumentException();
				}
				GClass5 gClass = new GClass5(533u);
				gClass.method_11((uint)dataRow["id"]);
				gClass.method_7((string)dataRow["username"]);
				if (dataRow2 != null)
				{
					gClass.method_9((int)Math.Ceiling((Phoenix.smethod_6() - (double)dataRow2["reg_timestamp"]) / 60.0));
					gClass.method_9((int)Math.Ceiling((Phoenix.smethod_6() - (double)dataRow2["login_timestamp"]) / 60.0));
				}
				else
				{
					gClass.method_9(0);
					gClass.method_9(0);
				}
				if (dataRow["online"].ToString() == "1")
				{
					gClass.method_13(true);
				}
				else
				{
					gClass.method_13(false);
				}
				if (dataRow2 != null)
				{
					gClass.method_9((int)dataRow2["cfhs"]);
					gClass.method_9((int)dataRow2["cfhs_abusive"]);
					gClass.method_9((int)dataRow2["cautions"]);
					gClass.method_9((int)dataRow2["bans"]);
				}
				else
				{
					gClass.method_9(0);
					gClass.method_9(0);
					gClass.method_9(0);
					gClass.method_9(0);
				}
				result = gClass;
			}
			return result;
		}
		public GClass5 method_19(uint uint_0)
		{
			GClass5 result;
			using (Class6 @class = Phoenix.smethod_12().method_0())
			{
				DataTable dataTable = @class.method_3("SELECT room_id,hour,minute FROM user_roomvisits WHERE user_id = '" + uint_0 + "' ORDER BY entry_timestamp DESC LIMIT 50");
				GClass5 gClass = new GClass5(537u);
				gClass.method_11(uint_0);
				gClass.method_7(Phoenix.smethod_15().method_2().method_26(uint_0));
				if (dataTable != null)
				{
					gClass.method_9(dataTable.Rows.Count);
					IEnumerator enumerator = dataTable.Rows.GetEnumerator();
					try
					{
						while (enumerator.MoveNext())
						{
							DataRow dataRow = (DataRow)enumerator.Current;
							Class27 class2 = Phoenix.smethod_15().method_9().method_11((uint)dataRow["room_id"]);
							gClass.method_13(class2.Boolean_0);
							gClass.method_11(class2.uint_0);
							gClass.method_7(class2.string_0);
							gClass.method_9((int)dataRow["hour"]);
							gClass.method_9((int)dataRow["minute"]);
						}
						goto IL_12A;
					}
					finally
					{
						IDisposable disposable = enumerator as IDisposable;
						if (disposable != null)
						{
							disposable.Dispose();
						}
					}
				}
				gClass.method_9(0);
				IL_12A:
				result = gClass;
			}
			return result;
		}
		public GClass5 method_20(uint uint_0)
		{
			GClass5 result;
			using (Class6 @class = Phoenix.smethod_12().method_0())
			{
				DataTable dataTable = @class.method_3("SELECT room_id,entry_timestamp,exit_timestamp FROM user_roomvisits WHERE user_id = '" + uint_0 + "' ORDER BY entry_timestamp DESC LIMIT 5");
				GClass5 gClass = new GClass5(536u);
				gClass.method_11(uint_0);
				gClass.method_7(Phoenix.smethod_15().method_2().method_26(uint_0));
				if (dataTable != null)
				{
					gClass.method_9(dataTable.Rows.Count);
					IEnumerator enumerator = dataTable.Rows.GetEnumerator();
					try
					{
						while (enumerator.MoveNext())
						{
							DataRow dataRow = (DataRow)enumerator.Current;
							DataTable dataTable2;
							if ((double)dataRow["exit_timestamp"] <= 0.0)
							{
								dataTable2 = @class.method_3(string.Concat(new object[]
								{
									"SELECT user_id,user_name,hour,minute,message FROM chatlogs WHERE room_id = '",
									(uint)dataRow["room_id"],
									"' AND timestamp > ",
									(double)dataRow["entry_timestamp"],
									" AND timestamp < UNIX_TIMESTAMP() ORDER BY timestamp DESC LIMIT 100"
								}));
							}
							else
							{
								dataTable2 = @class.method_3(string.Concat(new object[]
								{
									"SELECT user_id,user_name,hour,minute,message FROM chatlogs WHERE room_id = '",
									(uint)dataRow["room_id"],
									"' AND timestamp > ",
									(double)dataRow["entry_timestamp"],
									" AND timestamp < ",
									(double)dataRow["exit_timestamp"],
									" ORDER BY timestamp DESC LIMIT 100"
								}));
							}
							Class27 class2 = Phoenix.smethod_15().method_9().method_11((uint)dataRow["room_id"]);
							gClass.method_13(class2.Boolean_0);
							gClass.method_11(class2.uint_0);
							gClass.method_7(class2.string_0);
							if (dataTable2 != null)
							{
								gClass.method_9(dataTable2.Rows.Count);
								IEnumerator enumerator2 = dataTable2.Rows.GetEnumerator();
								try
								{
									while (enumerator2.MoveNext())
									{
										DataRow dataRow2 = (DataRow)enumerator2.Current;
										gClass.method_9((int)dataRow2["hour"]);
										gClass.method_9((int)dataRow2["minute"]);
										gClass.method_11((uint)dataRow2["user_id"]);
										gClass.method_7((string)dataRow2["user_name"]);
										gClass.method_7((string)dataRow2["message"]);
									}
									continue;
								}
								finally
								{
									IDisposable disposable = enumerator2 as IDisposable;
									if (disposable != null)
									{
										disposable.Dispose();
									}
								}
							}
							gClass.method_9(0);
						}
						goto IL_2EF;
					}
					finally
					{
						IDisposable disposable = enumerator as IDisposable;
						if (disposable != null)
						{
							disposable.Dispose();
						}
					}
				}
				gClass.method_9(0);
				IL_2EF:
				result = gClass;
			}
			return result;
		}
		public GClass5 method_21(Class111 class111_0, Class27 class27_0, double double_0)
		{
			GClass5 result;
			using (Class6 @class = Phoenix.smethod_12().method_0())
			{
				DataTable dataTable = @class.method_3(string.Concat(new object[]
				{
					"SELECT user_id,user_name,hour,minute,message FROM chatlogs WHERE room_id = '",
					class27_0.uint_0,
					"' AND timestamp >= '",
					double_0 - 300.0,
					"' AND timestamp < UNIX_TIMESTAMP() ORDER BY timestamp DESC LIMIT 100"
				}));
				GClass5 gClass = new GClass5(534u);
				gClass.method_11(class111_0.UInt32_0);
				gClass.method_11(class111_0.uint_1);
				gClass.method_11(class111_0.uint_2);
				gClass.method_13(class27_0.Boolean_0);
				gClass.method_11(class27_0.uint_0);
				gClass.method_7(class27_0.string_0);
				if (dataTable != null)
				{
					gClass.method_9(dataTable.Rows.Count);
					IEnumerator enumerator = dataTable.Rows.GetEnumerator();
					try
					{
						while (enumerator.MoveNext())
						{
							DataRow dataRow = (DataRow)enumerator.Current;
							gClass.method_9((int)dataRow["hour"]);
							gClass.method_9((int)dataRow["minute"]);
							gClass.method_11((uint)dataRow["user_id"]);
							gClass.method_7((string)dataRow["user_name"]);
							gClass.method_7((string)dataRow["message"]);
						}
						goto IL_186;
					}
					finally
					{
						IDisposable disposable = enumerator as IDisposable;
						if (disposable != null)
						{
							disposable.Dispose();
						}
					}
				}
				gClass.method_9(0);
				IL_186:
				result = gClass;
			}
			return result;
		}
		public GClass5 method_22(uint uint_0)
		{
			Class14 @class = Phoenix.smethod_15().method_9().method_19(uint_0);
			if (@class == null)
			{
				throw new ArgumentException();
			}
			bool bool_ = false;
			if (@class.string_2.ToLower() == "public")
			{
				bool_ = true;
			}
			GClass5 result;
			using (Class6 class2 = Phoenix.smethod_12().method_0())
			{
				DataTable dataTable = class2.method_3("SELECT user_id,user_name,hour,minute,message FROM chatlogs WHERE room_id = '" + @class.UInt32_0 + "' ORDER BY timestamp DESC LIMIT 150");
				GClass5 gClass = new GClass5(535u);
				gClass.method_13(bool_);
				gClass.method_11(@class.UInt32_0);
				gClass.method_7(@class.string_0);
				if (dataTable != null)
				{
					gClass.method_9(dataTable.Rows.Count);
					IEnumerator enumerator = dataTable.Rows.GetEnumerator();
					try
					{
						while (enumerator.MoveNext())
						{
							DataRow dataRow = (DataRow)enumerator.Current;
							gClass.method_9((int)dataRow["hour"]);
							gClass.method_9((int)dataRow["minute"]);
							gClass.method_11((uint)dataRow["user_id"]);
							gClass.method_7((string)dataRow["user_name"]);
							gClass.method_7((string)dataRow["message"]);
						}
						goto IL_17A;
					}
					finally
					{
						IDisposable disposable = enumerator as IDisposable;
						if (disposable != null)
						{
							disposable.Dispose();
						}
					}
				}
				gClass.method_9(0);
				IL_17A:
				result = gClass;
			}
			return result;
		}
	}
}
